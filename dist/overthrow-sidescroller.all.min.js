/*! overthrow-sidescroller - A sidescroller component based on overthrow. - v0.1.0 - 2014-05-15
* Copyright (c) 2014 Scott Jehl, Filament Group, Inc.; Licensed MIT */
!function(a){var b=a.document,c=b.documentElement,d="overthrow-enabled",e="ontouchmove"in b,f="WebkitOverflowScrolling"in c.style||"msOverflowStyle"in c.style||!e&&a.screen.width>800||function(){var b=a.navigator.userAgent,c=b.match(/AppleWebKit\/([0-9]+)/),d=c&&c[1],e=c&&d>=534;return b.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&e||b.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&a.blackberry&&e||b.indexOf("PlayBook")>-1&&e&&-1===!b.indexOf("Android 2")||b.match(/Firefox\/([0-9]+)/)&&RegExp.$1>=4||b.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&e||b.match(/NokiaBrowser\/([0-9\.]+)/)&&7.3===parseFloat(RegExp.$1)&&c&&d>=533}();a.overthrow={},a.overthrow.enabledClassName=d,a.overthrow.addClass=function(){-1===c.className.indexOf(a.overthrow.enabledClassName)&&(c.className+=" "+a.overthrow.enabledClassName)},a.overthrow.removeClass=function(){c.className=c.className.replace(a.overthrow.enabledClassName,"")},a.overthrow.set=function(){f&&a.overthrow.addClass()},a.overthrow.canBeFilledWithPoly=e,a.overthrow.forget=function(){a.overthrow.removeClass()},a.overthrow.support=f?"native":"none"}(this),function(a,b,c){if(b!==c){b.easing=function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},b.tossing=!1;var d;b.toss=function(a,e){b.intercept();var f,g,h=0,i=a.scrollLeft,j=a.scrollTop,k={top:"+0",left:"+0",duration:50,easing:b.easing};if(e)for(var l in k)e[l]!==c&&(k[l]=e[l]);return"string"==typeof k.left?(k.left=parseFloat(k.left),f=k.left+i):(f=k.left,k.left=k.left-i),"string"==typeof k.top?(k.top=parseFloat(k.top),g=k.top+j):(g=k.top,k.top=k.top-j),b.tossing=!0,d=setInterval(function(){h++<k.duration?(a.scrollLeft=k.easing(h,i,k.left,k.duration),a.scrollTop=k.easing(h,j,k.top,k.duration)):(f!==a.scrollLeft&&(a.scrollLeft=f),g!==a.scrollTop&&(a.scrollTop=g),b.intercept())},1),{top:g,left:f,duration:b.duration,easing:b.easing}},b.intercept=function(){clearInterval(d),b.tossing=!1}}}(this,this.overthrow),function(a,b,c){if(b!==c){b.scrollIndicatorClassName="overthrow";var d=a.document,e=d.documentElement,f="native"===b.support,g=b.canBeFilledWithPoly,h=(b.configure,b.set),i=b.forget,j=b.scrollIndicatorClassName;b.closest=function(a,c){return!c&&a.className&&a.className.indexOf(j)>-1&&a||b.closest(a.parentNode)};var k=!1;b.set=function(){if(h(),!k&&!f&&g){a.overthrow.addClass(),k=!0,b.support="polyfilled",b.forget=function(){i(),k=!1,d.removeEventListener&&d.removeEventListener("touchstart",u,!1)};var j,l,m,n,o=[],p=[],q=function(){o=[],l=null},r=function(){p=[],m=null},s=function(a){n=j.querySelectorAll("textarea, input");for(var b=0,c=n.length;c>b;b++)n[b].style.pointerEvents=a},t=function(a,b){if(d.createEvent){var e,f=(!b||b===c)&&j.parentNode||j.touchchild||j;f!==j&&(e=d.createEvent("HTMLEvents"),e.initEvent("touchend",!0,!0),j.dispatchEvent(e),f.touchchild=j,j=f,f.dispatchEvent(a))}},u=function(a){if(b.intercept&&b.intercept(),q(),r(),j=b.closest(a.target),j&&j!==e&&!(a.touches.length>1)){s("none");var c=a,d=j.scrollTop,f=j.scrollLeft,g=j.offsetHeight,h=j.offsetWidth,i=a.touches[0].pageY,k=a.touches[0].pageX,n=j.scrollHeight,u=j.scrollWidth,v=function(a){var b=d+i-a.touches[0].pageY,e=f+k-a.touches[0].pageX,s=b>=(o.length?o[0]:0),v=e>=(p.length?p[0]:0);b>0&&n-g>b||e>0&&u-h>e?a.preventDefault():t(c),l&&s!==l&&q(),m&&v!==m&&r(),l=s,m=v,j.scrollTop=b,j.scrollLeft=e,o.unshift(b),p.unshift(e),o.length>3&&o.pop(),p.length>3&&p.pop()},w=function(){s("auto"),setTimeout(function(){s("none")},450),j.removeEventListener("touchmove",v,!1),j.removeEventListener("touchend",w,!1)};j.addEventListener("touchmove",v,!1),j.addEventListener("touchend",w,!1)}};d.addEventListener("touchstart",u,!1)}}}}(this,this.overthrow),function(a){a.overthrow.set()}(this),function(a,b){function c(a){var b,c,d,e=a.overthrow||{};"append"===e.name&&(b=e.arguments[0],c=a.target||a.srcElement,d=c.querySelector("ul"),b.style.visibility="hidden",b.style.position="absolute",d.appendChild(b),d.style.width=d.offsetWidth+b.offsetWidth+"px",b.style.visibility="visible",b.style.position="static")}var d=b.sidescroller;d.onEvent("overthrow-init",a.document.documentElement,function(a){{var b=a.overthrow.sideScroll;a.overthrow.options||{}}d.onEvent("overthrow-method",b,c)})}(this,this.overthrow),function(a,b){function c(b,c,d,e){if(document.createEvent){var f=document.createEvent("Event");f.initEvent(c,!0,!0),f.overthrow=d,b.dispatchEvent(f)}else a.document.documentElement[e][c]={e:c,overthrow:d},a.document.documentElement[c]++}function d(a,b){var c,d=0,e=!1;return"string"==typeof a&&(c=a.charAt(0),("+"===c||"-"===c)&&(e=!0)),d=e?parseInt(a,10)+b:parseInt(a,10)}function e(a){var e,f,i,j,k=a.overthrow||{};if("goTo"===k.name){e=k.arguments[0],f=a.target||a.srcElement,j=f.querySelector(".overthrow"),i=f.querySelector("ul");var l=i.querySelectorAll("li"),m=j.offsetWidth,n=l[0].offsetWidth,o=j.scrollLeft,p=Math.round(o/n),q=d(e,p),r=n*q,s=j.scrollWidth-m;0>r?r=0:r>s&&(r=s);{f.getActiveSlides(r)}c(f,g,e,f.ieID),b.toss(j,{left:r,easing:k.easing,finished:function(){c(f,h,e,f.ieID)}})}}var f=b.sidescroller,g="overthrow-before-goto",h="overthrow-goto";f.onEvent("overthrow-init",a.document.documentElement,function(b){{var c=b.overthrow.sideScroll;b.overthrow.options||{}}a.document.attachEvent&&(a.document.documentElement[h]=0,a.document.documentElement[g]=0,a.document.documentElement[c.ieID][h]={},a.document.documentElement[c.ieID][g]={}),f.onEvent("overthrow-method",c,e)})}(this,this.overthrow),function(a,b){function c(a,b){a.setAttribute("class",a.getAttribute("class").replace(b,"")),a.setAttribute("class",a.getAttribute("class")+b)}function d(a,b){a.setAttribute("class",a.getAttribute("class").replace(b,""))}function e(b){b=b||a.event,f(b.target||b.srcElement,b&&b.overthrow&&b.overthrow.active)}function f(a,b,e){if(!g){var f,i,j,k,l,m,n,o,p,q,r=!1,s=!1;m=a.querySelector("a.sidescroll-next"),n=a.querySelector("a.sidescroll-prev"),p=a.querySelector("a.sidescroll-rwd"),q=a.querySelector("a.sidescroll-ff"),l=a.querySelector("li.active"),o=a.querySelector(".overthrow"),b?(f=o.querySelectorAll("li"),r=0==b[0],s=b[b.length-1]>=f.length-1):(i=o.offsetWidth,j=o.scrollLeft,k=o.scrollWidth-i,r=e&&l?!l.previousElementSibling:5>j,s=j>k-5),d(m,h),d(n,h),q&&d(q,h),p&&d(p,h),r&&(c(n,h),p&&c(p,h)),s&&(c(m,h),q&&c(q,h))}}var g,h=" disabled",i=b.sidescroller;i.onEvent("overthrow-init",a.document.documentElement,function(a){var b,d,f=a.overthrow.sideScroll,g=a.overthrow.options||{};g.disableNav===!0&&(b=g.rewind,i.onEvent("overthrow-scroll",f,e),i.onEvent("overthrow-next",f,e),i.onEvent("overthrow-prev",f,e),i.onEvent("overthrow-refresh",f,e),i.onEvent("overthrow-resize",f,e),e({target:f}),c(f.querySelector("a.sidescroll-prev"),h),(d=f.querySelector("a.sidescroll-rwd"))&&c(d,h))}),i._toggleNavigation=f}(this,this.overthrow),function(a,b){var c=b.sidescroller;c.onEvent("overthrow-init",a.document.documentElement,function(b){function c(b){{var c=b||a.event,d=c.target||c.srcElement,f=e.querySelector(".sidescroll"),g="keydown"!==c.type&&d.className.indexOf("sidescroll-rwd")>-1;"overthrow"+(new Date).getTime()}d&&"A"!==d.nodeName||a.overthrow.toss(f,{left:g?0:f.querySelector("ul").offsetWidth-e.offsetWidth})}var d=b.overthrow.options||{},e=b.overthrow.sideScroll;if(d.skipLinks===!0){var f=document.createElement("div"),g="<a href='#' class='sidescroll-rwd'>Skip to start</a><a href='#' class='sidescroll-ff'>Skip to end</a>";f.setAttribute("class","sidescroll-skip-nav"),f.innerHTML=g,f.addEventListener("click",c),e.appendChild(f)}})}(this,this.overthrow);